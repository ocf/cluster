apiVersion: v1
kind: StatefulSet
metadata:
  name: sopel
spec:
  replicas: 1
  selector:
    matchLabels:
      k8s.ocf.io/app: ergo
      k8s.ocf.io/component: sopel
  serviceName: sopel
  template:
    metadata:
      labels:
        k8s.ocf.io/app: ergo
        k8s.ocf.io/component: sopel
    spec:
      containers:
      - image: harbor.ocf.berkeley.edu/ocf/ergo/sopel:600ba5089c8679df161b5e0400a145a95035d75e
        name: sopel
        volumeMounts:
        - mountPath: /home/sopel/.sopel/default.cfg
          name: sopel-config
          subPath: default.cfg
        - mountPath: /home/sopel/.sopel/
          name: sopel-data
      volumes:
      - configMap:
          name: sopel-config
        name: sopel-config
  volumeClaimTemplates:
  - metadata:
      name: sopel-data
    spec:
      accessModes:
      - ReadWriteOnce
      resources:
        requests:
          storage: 32Gi
