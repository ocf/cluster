apiVersion: monitoring.coreos.com/v1
kind: PrometheusRule
metadata:
  labels:
    app: kube-prometheus-stack
    app.kubernetes.io/instance: prometheus
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/part-of: kube-prometheus-stack
    app.kubernetes.io/version: 75.16.1
    chart: kube-prometheus-stack-75.16.1
    heritage: Helm
    release: prometheus
  name: prometheus-kube-prometheus-kubelet.rules
  namespace: prometheus
spec:
  groups:
  - name: kubelet.rules
    rules:
    - expr: "histogram_quantile(\n  0.99,\n  sum(rate(kubelet_pleg_relist_duration_seconds_bucket{job=\"\
        kubelet\", metrics_path=\"/metrics\"}[5m])) by (cluster, instance, le)\n \
        \ * on (cluster, instance) group_left (node)\n  max by (cluster, instance,\
        \ node) (kubelet_node_name{job=\"kubelet\", metrics_path=\"/metrics\"})\n)"
      labels:
        quantile: '0.99'
      record: node_quantile:kubelet_pleg_relist_duration_seconds:histogram_quantile
    - expr: "histogram_quantile(\n  0.9,\n  sum(rate(kubelet_pleg_relist_duration_seconds_bucket{job=\"\
        kubelet\", metrics_path=\"/metrics\"}[5m])) by (cluster, instance, le)\n \
        \ * on (cluster, instance) group_left (node)\n  max by (cluster, instance,\
        \ node) (kubelet_node_name{job=\"kubelet\", metrics_path=\"/metrics\"})\n)"
      labels:
        quantile: '0.9'
      record: node_quantile:kubelet_pleg_relist_duration_seconds:histogram_quantile
    - expr: "histogram_quantile(\n  0.5,\n  sum(rate(kubelet_pleg_relist_duration_seconds_bucket{job=\"\
        kubelet\", metrics_path=\"/metrics\"}[5m])) by (cluster, instance, le)\n \
        \ * on (cluster, instance) group_left (node)\n  max by (cluster, instance,\
        \ node) (kubelet_node_name{job=\"kubelet\", metrics_path=\"/metrics\"})\n)"
      labels:
        quantile: '0.5'
      record: node_quantile:kubelet_pleg_relist_duration_seconds:histogram_quantile
