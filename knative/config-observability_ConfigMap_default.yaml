apiVersion: v1
data:
  _example: "################################\n#                              #\n\
    #    EXAMPLE CONFIGURATION     #\n#                              #\n################################\n\
    \n# This block is not actually functional configuration,\n# but serves to illustrate\
    \ the available configuration\n# options and document them in a way that is accessible\n\
    # to users that `kubectl edit` this config map.\n#\n# These sample configuration\
    \ options may be copied out of\n# this example block and unindented to be in the\
    \ data block\n# to actually change the configuration.\n\n# logging.enable-var-log-collection\
    \ defaults to false.\n# The fluentd daemon set will be set up to collect /var/log\
    \ if\n# this flag is true.\nlogging.enable-var-log-collection: false\n\n# logging.revision-url-template\
    \ provides a template to use for producing the\n# logging URL that is injected\
    \ into the status of each Revision.\n# This value is what you might use the the\
    \ Knative monitoring bundle, and provides\n# access to Kibana after setting up\
    \ kubectl proxy.\nlogging.revision-url-template: |\n  http://localhost:8001/api/v1/namespaces/knative-monitoring/services/kibana-logging/proxy/app/kibana#/discover?_a=(query:(match:(kubernetes.labels.serving-knative-dev%2FrevisionUID:(query:'${REVISION_UID}',type:phrase))))\n\
    \n# If non-empty, this enables queue proxy writing request logs to stdout.\n#\
    \ The value determines the shape of the request logs and it must be a valid go\
    \ text/template.\n# It is important to keep this as a single line. Multiple lines\
    \ are parsed as separate entities\n# by most collection agents and will split\
    \ the request logs into multiple records.\n#\n# The following fields and functions\
    \ are available to the template:\n#\n# Request: An http.Request (see https://golang.org/pkg/net/http/#Request)\n\
    # representing an HTTP request received by the server.\n#\n# Response:\n# struct\
    \ {\n#   Code    int       // HTTP status code (see https://www.iana.org/assignments/http-status-codes/http-status-codes.xhtml)\n\
    #   Size    int       // An int representing the size of the response.\n#   Latency\
    \ float64   // A float64 representing the latency of the response in seconds.\n\
    # }\n#\n# Revision:\n# struct {\n#   Name          string  // Knative revision\
    \ name\n#   Namespace     string  // Knative revision namespace\n#   Service \
    \      string  // Knative service name\n#   Configuration string  // Knative configuration\
    \ name\n#   PodName       string  // Name of the pod hosting the revision\n# \
    \  PodIP         string  // IP of the pod hosting the revision\n# }\n#\nlogging.request-log-template:\
    \ '{\"httpRequest\": {\"requestMethod\": \"{{.Request.Method}}\", \"requestUrl\"\
    : \"{{js .Request.RequestURI}}\", \"requestSize\": \"{{.Request.ContentLength}}\"\
    , \"status\": {{.Response.Code}}, \"responseSize\": \"{{.Response.Size}}\", \"\
    userAgent\": \"{{js .Request.UserAgent}}\", \"remoteIp\": \"{{js .Request.RemoteAddr}}\"\
    , \"serverIp\": \"{{.Revision.PodIP}}\", \"referer\": \"{{js .Request.Referer}}\"\
    , \"latency\": \"{{.Response.Latency}}s\", \"protocol\": \"{{.Request.Proto}}\"\
    }, \"traceId\": \"{{index .Request.Header \"X-B3-Traceid\"}}\"}'\n\n# metrics.backend-destination\
    \ field specifies the system metrics destination.\n# It supports either prometheus\
    \ (the default) or stackdriver.\n# Note: Using stackdriver will incur additional\
    \ charges\nmetrics.backend-destination: prometheus\n\n# metrics.request-metrics-backend-destination\
    \ specifies the request metrics\n# destination. If non-empty, it enables queue\
    \ proxy to send request metrics.\n# Currently supported values: prometheus, stackdriver.\n\
    metrics.request-metrics-backend-destination: prometheus\n\n# metrics.stackdriver-project-id\
    \ field specifies the stackdriver project ID. This\n# field is optional. When\
    \ running on GCE, application default credentials will be\n# used if this field\
    \ is not provided.\nmetrics.stackdriver-project-id: \"<your stackdriver project\
    \ id>\"\n\n# metrics.allow-stackdriver-custom-metrics indicates whether it is\
    \ allowed to send metrics to\n# Stackdriver using \"global\" resource type and\
    \ custom metric type if the\n# metrics are not supported by \"knative_revision\"\
    \ resource type. Setting this\n# flag to \"true\" could cause extra Stackdriver\
    \ charge.\n# If metrics.backend-destination is not Stackdriver, this is ignored.\n\
    metrics.allow-stackdriver-custom-metrics: \"false\"\n"
kind: ConfigMap
metadata:
  labels:
    app.kubernetes.io/part-of: knative-operator
    app.kubernetes.io/version: 1.8.1
    operator.knative.dev/release: v1.8.1
  name: config-observability
  namespace: default
